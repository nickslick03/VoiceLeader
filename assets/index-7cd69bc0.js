(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const O={};function pt(e){O.context=e}const bt=(e,t)=>e===t,V=Symbol("solid-proxy"),fe=Symbol("solid-track"),z={equals:bt};let Oe=Ve;const q=1,Z=2,Ie={owned:null,cleanups:null,context:null,owner:null};var S=null;let R=null,y=null,C=null,P=null,be=0;function Y(e,t){const n=y,s=S,r=e.length===0,i=r?Ie:{owned:null,cleanups:null,context:null,owner:t===void 0?s:t},o=r?e:()=>e(()=>k(()=>le(i)));S=i,y=null;try{return B(o,!0)}finally{y=n,S=s}}function E(e,t){t=t?Object.assign({},z,t):z;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Re(n,r));return[qe.bind(n),s]}function _(e,t,n){const s=ye(e,t,!1,q);W(s)}function ee(e,t,n){Oe=wt;const s=ye(e,t,!1,q);s.user=!0,P?P.push(s):W(s)}function M(e,t,n){n=n?Object.assign({},z,n):z;const s=ye(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,W(s),qe.bind(s)}function yt(e){return B(e,!1)}function k(e){if(y===null)return e();const t=y;y=null;try{return e()}finally{y=t}}function vt(e){ee(()=>k(e))}function $t(e){return S===null||(S.cleanups===null?S.cleanups=[e]:S.cleanups.push(e)),e}function De(){return y}function Pe(e,t){const n=Symbol("context");return{id:n,Provider:_t(n),defaultValue:e}}function ke(e){let t;return(t=Be(S,e.id))!==void 0?t:e.defaultValue}function Le(e){const t=M(e),n=M(()=>de(t()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}function qe(){const e=R;if(this.sources&&(this.state||e))if(this.state===q||e)W(this);else{const t=C;C=null,B(()=>ne(this),!1),C=t}if(y){const t=this.observers?this.observers.length:0;y.sources?(y.sources.push(this),y.sourceSlots.push(t)):(y.sources=[this],y.sourceSlots=[t]),this.observers?(this.observers.push(y),this.observerSlots.push(y.sources.length-1)):(this.observers=[y],this.observerSlots=[y.sources.length-1])}return this.value}function Re(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&B(()=>{for(let r=0;r<e.observers.length;r+=1){const i=e.observers[r],o=R&&R.running;o&&R.disposed.has(i),(o&&!i.tState||!o&&!i.state)&&(i.pure?C.push(i):P.push(i),i.observers&&Fe(i)),o||(i.state=q)}if(C.length>1e6)throw C=[],new Error},!1)),t}function W(e){if(!e.fn)return;le(e);const t=S,n=y,s=be;y=S=e,mt(e,e.value,s),y=n,S=t}function mt(e,t,n){let s;try{s=e.fn(t)}catch(r){e.pure&&(e.state=q,e.owned&&e.owned.forEach(le),e.owned=null),Ke(r)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Re(e,s):e.value=s,e.updatedAt=n)}function ye(e,t,n,s=q,r){const i={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:S,context:null,pure:n};return S===null||S!==Ie&&(S.owned?S.owned.push(i):S.owned=[i]),i}function te(e){const t=R;if(e.state===0||t)return;if(e.state===Z||t)return ne(e);if(e.suspense&&k(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<be);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===q||t)W(e);else if(e.state===Z||t){const r=C;C=null,B(()=>ne(e,n[0]),!1),C=r}}function B(e,t){if(C)return e();let n=!1;t||(C=[]),P?n=!0:P=[],be++;try{const s=e();return St(n),s}catch(s){n||(P=null),C=null,Ke(s)}}function St(e){if(C&&(Ve(C),C=null),e)return;const t=P;P=null,t.length&&B(()=>Oe(t),!1)}function Ve(e){for(let t=0;t<e.length;t++)te(e[t])}function wt(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:te(s)}for(O.context&&pt(),t=0;t<n;t++)te(e[t])}function ne(e,t){const n=R;e.state=0;for(let s=0;s<e.sources.length;s+=1){const r=e.sources[s];r.sources&&(r.state===q||n?r!==t&&te(r):(r.state===Z||n)&&ne(r,t))}}function Fe(e){const t=R;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=Z,s.pure?C.push(s):P.push(s),s.observers&&Fe(s))}}function le(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(e.owned){for(t=0;t<e.owned.length;t++)le(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function xt(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Ke(e){throw e=xt(e),e}function Be(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Be(e.owner,t):void 0}function de(e){if(typeof e=="function"&&!e.length)return de(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=de(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function _t(e,t){return function(s){let r;return _(()=>r=k(()=>(S.context={[e]:s.value},Le(()=>s.children))),void 0),r}}const Ct=Symbol("fallback");function Ce(e){for(let t=0;t<e.length;t++)e[t]()}function At(e,t,n={}){let s=[],r=[],i=[],o=0,l=t.length>1?[]:null;return $t(()=>Ce(i)),()=>{let u=e()||[],a,c;return u[fe],k(()=>{let p=u.length,v,m,j,D,L,w,A,N,T;if(p===0)o!==0&&(Ce(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[Ct],r[0]=Y(ce=>(i[0]=ce,n.fallback())),o=1);else if(o===0){for(r=new Array(p),c=0;c<p;c++)s[c]=u[c],r[c]=Y(h);o=p}else{for(j=new Array(p),D=new Array(p),l&&(L=new Array(p)),w=0,A=Math.min(o,p);w<A&&s[w]===u[w];w++);for(A=o-1,N=p-1;A>=w&&N>=w&&s[A]===u[N];A--,N--)j[N]=r[A],D[N]=i[A],l&&(L[N]=l[A]);for(v=new Map,m=new Array(N+1),c=N;c>=w;c--)T=u[c],a=v.get(T),m[c]=a===void 0?-1:a,v.set(T,c);for(a=w;a<=A;a++)T=s[a],c=v.get(T),c!==void 0&&c!==-1?(j[c]=r[a],D[c]=i[a],l&&(L[c]=l[a]),c=m[c],v.set(T,c)):i[a]();for(c=w;c<p;c++)c in j?(r[c]=j[c],i[c]=D[c],l&&(l[c]=L[c],l[c](c))):r[c]=Y(h);r=r.slice(0,o=p),s=u.slice(0)}return r});function h(p){if(i[c]=p,l){const[v,m]=E(c);return l[c]=m,t(u[c],v)}return t(u[c])}}}function d(e,t){return k(()=>e(t||{}))}function I(e){const t="fallback"in e&&{fallback:()=>e.fallback};return M(At(()=>e.each,e.children,t||void 0))}function K(e){let t=!1;const n=e.keyed,s=M(()=>e.when,void 0,{equals:(r,i)=>t?r===i:!r==!i});return M(()=>{const r=s();if(r){const i=e.children,o=typeof i=="function"&&i.length>0;return t=n||o,o?k(()=>i(r)):i}return e.fallback},void 0,void 0)}function Ae(e){let t=!1,n=!1;const s=(o,l)=>o[0]===l[0]&&(t?o[1]===l[1]:!o[1]==!l[1])&&o[2]===l[2],r=Le(()=>e.children),i=M(()=>{let o=r();Array.isArray(o)||(o=[o]);for(let l=0;l<o.length;l++){const u=o[l].when;if(u)return n=!!o[l].keyed,[l,u,o[l]]}return[-1]},void 0,{equals:s});return M(()=>{const[o,l,u]=i();if(o<0)return e.fallback;const a=u.children,c=typeof a=="function"&&a.length>0;return t=n||c,c?k(()=>a(l)):a},void 0,void 0)}function X(e){return e}function Nt(e,t,n){let s=n.length,r=t.length,i=s,o=0,l=0,u=t[r-1].nextSibling,a=null;for(;o<r||l<i;){if(t[o]===n[l]){o++,l++;continue}for(;t[r-1]===n[i-1];)r--,i--;if(r===o){const c=i<s?l?n[l-1].nextSibling:n[i-l]:u;for(;l<i;)e.insertBefore(n[l++],c)}else if(i===l)for(;o<r;)(!a||!a.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[l]===t[r-1]){const c=t[--r].nextSibling;e.insertBefore(n[l++],t[o++].nextSibling),e.insertBefore(n[--i],c),t[r]=n[i]}else{if(!a){a=new Map;let h=l;for(;h<i;)a.set(n[h],h++)}const c=a.get(t[o]);if(c!=null)if(l<c&&c<i){let h=o,p=1,v;for(;++h<r&&h<i&&!((v=a.get(t[h]))==null||v!==c+p);)p++;if(p>c-l){const m=t[o];for(;l<c;)e.insertBefore(n[l++],m)}else e.replaceChild(n[l++],t[o++])}else o++;else t[o++].remove()}}}const Ne="_$DX_DELEGATE";function Mt(e,t,n,s={}){let r;return Y(i=>{r=i,t===document?e():f(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{r(),t.textContent=""}}function b(e,t,n){const s=document.createElement("template");s.innerHTML=e;let r=s.content.firstChild;return n&&(r=r.firstChild),r}function Q(e,t=window.document){const n=t[Ne]||(t[Ne]=new Set);for(let s=0,r=e.length;s<r;s++){const i=e[s];n.has(i)||(n.add(i),t.addEventListener(i,Et))}}function Ge(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ve(e,t){t==null?e.removeAttribute("class"):e.className=t}function f(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return se(e,t,s,n);_(r=>se(e,t(),r,n),s)}function Et(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),O.registry&&!O.done&&(O.done=!0,document.querySelectorAll("[id^=pl-]").forEach(s=>{for(;s&&s.nodeType!==8&&s.nodeValue!=="pl-"+e;){let r=s.nextSibling;s.remove(),s=r}s&&s.remove()}));n;){const s=n[t];if(s&&!n.disabled){const r=n[`${t}Data`];if(r!==void 0?s.call(n,r,e):s.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function se(e,t,n,s,r){for(O.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,o=s!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(O.context)return n;if(i==="number"&&(t=t.toString()),o){let l=n[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),n=F(e,n,s,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(O.context)return n;n=F(e,n,s)}else{if(i==="function")return _(()=>{let l=t();for(;typeof l=="function";)l=l();n=se(e,l,n,s)}),()=>n;if(Array.isArray(t)){const l=[],u=n&&Array.isArray(n);if(he(l,t,n,r))return _(()=>n=se(e,l,n,s,!0)),()=>n;if(O.context){if(!l.length)return n;for(let a=0;a<l.length;a++)if(l[a].parentNode)return n=l}if(l.length===0){if(n=F(e,n,s),o)return n}else u?n.length===0?Me(e,l,s):Nt(e,n,l):(n&&F(e),Me(e,l));n=l}else if(t instanceof Node){if(O.context&&t.parentNode)return n=o?[t]:t;if(Array.isArray(n)){if(o)return n=F(e,n,s,t);F(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function he(e,t,n,s){let r=!1;for(let i=0,o=t.length;i<o;i++){let l=t[i],u=n&&n[i];if(l instanceof Node)e.push(l);else if(!(l==null||l===!0||l===!1))if(Array.isArray(l))r=he(e,l,u)||r;else if(typeof l=="function")if(s){for(;typeof l=="function";)l=l();r=he(e,Array.isArray(l)?l:[l],Array.isArray(u)?u:[u])||r}else e.push(l),r=!0;else{const a=String(l);u&&u.nodeType===3&&u.data===a?e.push(u):e.push(document.createTextNode(a))}}return r}function Me(e,t,n=null){for(let s=0,r=t.length;s<r;s++)e.insertBefore(t[s],n)}function F(e,t,n,s){if(n===void 0)return e.textContent="";const r=s||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const l=t[o];if(r!==l){const u=l.parentNode===e;!i&&!o?u?e.replaceChild(r,l):e.insertBefore(r,n):u&&l.remove()}else i=!0}}else e.insertBefore(r,n);return[r]}const jt=b('<div class="flex justify-center"><div></div></div>');let ue=1;function Tt(e,t,n){t.staves.forEach((s,r)=>{s.measures.forEach((i,o)=>{const{measures:l}=n.staves[r];i.noteSets.some((u,a)=>u.notes.length!=l[o].noteSets[a].notes.length)&&e.pasteNoteSets(i.noteSets,r,o,0)})})}function Ot(e,t,n){t.staves.forEach((s,r)=>{s.measures.forEach((i,o)=>{e.pasteNoteSets(i.noteSets,r,o,0)})}),n.staves[0].measures.length>2&&(e.selectMeasures(2,-1),e.deleteSelection())}const It=e=>{const[t,n]=E();return vt(()=>{NFClient.init();const s=new NFClient.ScoreView("score"+ue,"241f3b52f9ea0927019af4137fd88839fe056c26",{width:window.innerWidth,height:400,viewParams:{role:"template"}});e.setScoreView(s),ue++,s.addEventListener("scoreDataLoaded",()=>{s.getScore().done(r=>{n(r)}),s.addEventListener("selectionChange",()=>{s.getScore().done(r=>{r.staves[0].measures.length!=2?(Ot(s,t(),r),s.getScore().done(i=>{n(i)})):JSON.stringify(t())!=JSON.stringify(r)&&(Tt(s,t(),r),s.getScore().done(i=>{n(i)}))})})})}),(()=>{const s=jt.cloneNode(!0),r=s.firstChild;return Ge(r,"id","score"+ue),s})()},Dt=b("<sup></sup>"),Pt=b('<span class="relative"><sup></sup><sub class="absolute -translate-x-full bottom-1/4"></sub></span>'),kt=b('<div class="pb-1"><span></span><sup></sup></div>'),Ee=["I","II","III","IV","V","VI","VII"],Lt=["","6","64"],qt=["7","65","43","42"],Ue=e=>{const t=M(()=>e.chord.isSeventh?qt[e.chord.inversion??0]:Lt[e.chord.inversion??0]);return(()=>{const n=kt.cloneNode(!0),s=n.firstChild,r=s.nextSibling;return f(s,(()=>{const i=M(()=>e.chord.quality.match("major")!==null);return()=>i()?Ee[e.chord.numeral-1]:Ee[e.chord.numeral-1].toLowerCase()})()),f(r,d(Ae,{get children(){return[d(X,{get when(){return e.chord.quality==="halfDiminished"},children:"ø"}),d(X,{get when(){return e.chord.quality==="diminished"},children:"o"})]}})),f(n,d(Ae,{get children(){return[d(X,{get when(){return t().length===1},get children(){const i=Dt.cloneNode(!0);return f(i,t),i}}),d(X,{get when(){return t().length===2},get children(){const i=Pt.cloneNode(!0),o=i.firstChild,l=o.nextSibling;return f(o,()=>t()[0]),f(l,()=>t()[1]),i}})]}}),null),n})()},ge=Symbol("store-raw"),U=Symbol("store-node"),Rt=Symbol("store-name");function He(e,t){let n=e[V];if(!n&&(Object.defineProperty(e,V,{value:n=new Proxy(e,Kt)}),!Array.isArray(e))){const s=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,o=s.length;i<o;i++){const l=s[i];r[l].get&&Object.defineProperty(e,l,{enumerable:r[l].enumerable,get:r[l].get.bind(n)})}}return n}function re(e){let t;return e!=null&&typeof e=="object"&&(e[V]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function H(e,t=new Set){let n,s,r,i;if(n=e!=null&&e[ge])return n;if(!re(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,l=e.length;o<l;o++)r=e[o],(s=H(r,t))!==r&&(e[o]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let u=0,a=o.length;u<a;u++)i=o[u],!l[i].get&&(r=e[i],(s=H(r,t))!==r&&(e[i]=s))}return e}function $e(e){let t=e[U];return t||Object.defineProperty(e,U,{value:t={}}),t}function pe(e,t,n){return e[t]||(e[t]=Qe(n))}function Vt(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===V||t===U||t===Rt||(delete n.value,delete n.writable,n.get=()=>e[V][t]),n}function We(e){if(De()){const t=$e(e);(t._||(t._=Qe()))()}}function Ft(e){return We(e),Reflect.ownKeys(e)}function Qe(e){const[t,n]=E(e,{equals:!1,internal:!0});return t.$=n,t}const Kt={get(e,t,n){if(t===ge)return e;if(t===V)return n;if(t===fe)return We(e),n;const s=$e(e),r=s.hasOwnProperty(t);let i=r?s[t]():e[t];if(t===U||t==="__proto__")return i;if(!r){const o=Object.getOwnPropertyDescriptor(e,t);De()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=pe(s,t,i)())}return re(i)?He(i):i},has(e,t){return t===ge||t===V||t===fe||t===U||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Ft,getOwnPropertyDescriptor:Vt};function ie(e,t,n,s=!1){if(!s&&e[t]===n)return;const r=e[t],i=e.length;n===void 0?delete e[t]:e[t]=n;let o=$e(e),l;(l=pe(o,t,r))&&l.$(()=>n),Array.isArray(e)&&e.length!==i&&(l=pe(o,"length",i))&&l.$(e.length),(l=o._)&&l.$()}function Xe(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const r=n[s];ie(e,r,t[r])}}function Bt(e,t){if(typeof t=="function"&&(t=t(e)),t=H(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const r=t[n];e[n]!==r&&ie(e,n,r)}ie(e,"length",s)}else Xe(e,t)}function G(e,t,n=[]){let s,r=e;if(t.length>1){s=t.shift();const o=typeof s,l=Array.isArray(e);if(Array.isArray(s)){for(let u=0;u<s.length;u++)G(e,[s[u]].concat(t),n);return}else if(l&&o==="function"){for(let u=0;u<e.length;u++)s(e[u],u)&&G(e,[u].concat(t),n);return}else if(l&&o==="object"){const{from:u=0,to:a=e.length-1,by:c=1}=s;for(let h=u;h<=a;h+=c)G(e,[h].concat(t),n);return}else if(t.length>1){G(e[s],t,[s].concat(n));return}r=e[s],n=[s].concat(n)}let i=t[0];typeof i=="function"&&(i=i(r,n),i===r)||s===void 0&&i==null||(i=H(i),s===void 0||re(r)&&re(i)&&!Array.isArray(i)?Xe(r,i):ie(e,s,i))}function Je(...[e,t]){const n=H(e||{}),s=Array.isArray(n),r=He(n);function i(...o){yt(()=>{s&&o.length===1?Bt(n,o[0]):G(n,o)})}return[r,i]}const Ye=Pe();function Gt(e){const t=Je(Array(7).fill(0).map((n,s)=>({numeral:1,quality:"major",isSeventh:!1,inversion:0})));return d(Ye.Provider,{value:t,get children(){return e.children}})}function oe(){return ke(Ye)}const Ut=b('<option value="majorMinor">Major-Minor</option>'),Ht=b('<option value="halfDiminished">Half-Diminished</option>'),Wt=b('<div><div class="text-center bg-white px-8 py-4"><h2 class="text-2xl font-bold mb-8">Change Chord</h2><div class="flex justify-center flex-wrap mb-8"><div class="text-6xl pr-8 self-center"></div><div class="text-left flex flex-col gap-4"><label>Scale degree:<select name="scale-degree" id="scale-degree" class="ml-1"></select></label><div class="flex gap-5"></div><label class="block">Qualtiy:&nbsp;<select name="quality" id="quality"><option value="major">Major</option><option value="minor">Minor</option><option value="diminished">Diminished</option></select></label><label>Inversion:&nbsp;<select name="inversion" id="inversion"></select></label></div></div><div class="flex justify-center gap-4"><button class="text-white px-2 py-1 bg-red-600 hover:bg-red-400">Cancel</button><button class="text-white px-2 py-1 bg-green-600 hover:bg-green-400">Save</button></div></div></div>'),je=b("<option></option>"),Qt=b('<label><input type="radio" name="harmony">&nbsp;</label>'),Xt=e=>{const[t,n]=Je({numeral:1,quality:"major",isSeventh:!1,inversion:0,secondary:1});ee(()=>{e.getCurrentIndex()>-1&&n(Object.assign({},oe()[0][e.getCurrentIndex()]))});const s=o=>{o||((t.quality==="majorMinor"||t.quality==="halfDiminished")&&n("quality","major"),t.inversion===3&&n("inversion",0)),n("isSeventh",o)},r=oe()[1],i=()=>r(e.getCurrentIndex(),{...t});return(()=>{const o=Wt.cloneNode(!0),l=o.firstChild,u=l.firstChild,a=u.nextSibling,c=a.firstChild,h=c.nextSibling,p=h.firstChild,v=p.firstChild,m=v.nextSibling,j=p.nextSibling,D=j.nextSibling,L=D.firstChild,w=L.nextSibling,A=w.firstChild,N=A.nextSibling,T=N.nextSibling,ce=D.nextSibling,ft=ce.firstChild,dt=ft.nextSibling,we=a.nextSibling,ht=we.firstChild,gt=ht.nextSibling;return f(c,d(Ue,{chord:t})),f(m,d(I,{get each(){return Array(7)},children:(g,x)=>(()=>{const $=je.cloneNode(!0);return $.$$click=()=>n("numeral",x()+1),f($,()=>x()+1),_(()=>$.selected=x()+1===t.numeral),_(()=>$.value=x()+1),$})()})),f(j,d(I,{each:["Triad","Seventh"],children:g=>(()=>{const x=Qt.cloneNode(!0),$=x.firstChild;return $.nextSibling,$.$$click=()=>s(g==="Seventh"),Ge($,"id",g),f(x,g,null),_(()=>$.checked=g==="Seventh"===t.isSeventh),x})()})),A.$$click=()=>n("quality","major"),f(w,d(K,{get when(){return t.isSeventh},get children(){const g=Ut.cloneNode(!0);return g.$$click=()=>n("quality","majorMinor"),_(()=>g.selected=t.quality==="majorMinor"),g}}),N),N.$$click=()=>n("quality","minor"),f(w,d(K,{get when(){return t.isSeventh},get children(){const g=Ht.cloneNode(!0);return g.$$click=()=>n("quality","halfDiminished"),_(()=>g.selected=t.quality==="halfDiminished"),g}}),T),T.$$click=()=>n("quality","diminished"),f(dt,d(I,{each:["root","1st","2nd","3rd"],children:(g,x)=>d(K,{get when(){return x()!==3||t.isSeventh},get children(){const $=je.cloneNode(!0);return $.$$click=()=>n("inversion",x()),f($,g),_(()=>$.selected=t.inversion===x()),_(()=>$.value=x()),$}})})),we.$$click=g=>{g.target.nodeName==="BUTTON"&&(e.setShowModal(!1),e.setCurrentIndex(-1))},gt.$$click=i,_(g=>{const x=`fixed top-0 w-screen h-screen z-10
        bg-gray-700 bg-opacity-50 
        flex justify-center items-center`+(e.getShowModal()?"":" hidden"),$=t.quality==="major",xe=t.quality==="minor",_e=t.quality==="diminished";return x!==g._v$&&ve(o,g._v$=x),$!==g._v$2&&(A.selected=g._v$2=$),xe!==g._v$3&&(N.selected=g._v$3=xe),_e!==g._v$4&&(T.selected=g._v$4=_e),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),o})()};Q(["click"]);const Jt=b('<div class="flex justify-center gap-2 flex-wrap"></div>'),Yt=b('<div class="bg-gray-400 p-2"><div class="flex justify-center gap-2"></div><div class="text-center pt-1">Measure </div></div>'),zt=b('<div class="bg-white p-2"></div>'),Zt=()=>{const e=M(()=>oe()[0]),[t,n]=E(!1),[s,r]=E(-1),i=o=>{r(o),n(!0)};return[(()=>{const o=Jt.cloneNode(!0);return f(o,d(I,{get each(){return Array(2)},children:(l,u)=>(()=>{const a=Yt.cloneNode(!0),c=a.firstChild,h=c.nextSibling;return h.firstChild,f(c,d(I,{get each(){return Array(u()===0?4:3)},children:(p,v)=>(()=>{const m=zt.cloneNode(!0);return m.$$click=()=>i(u()*4+v()),f(m,d(Ue,{get chord(){return e()[u()*4+v()]}})),m})()})),f(h,()=>u()+1,null),a})()})),o})(),d(Xt,{getShowModal:t,setShowModal:n,getCurrentIndex:s,setCurrentIndex:r})]};Q(["click"]);const en=b('<div class="py-3 flex flex-col gap-5"><div class="text-lg text-center">To change the key signature and mode, go to <br><span class="text-orange-600 font-bold">Palettes </span>&gt; Measure &gt; Change Key Signature.</div><div class="text-center">Chords:</div></div>'),tn=()=>(()=>{const e=en.cloneNode(!0),t=e.firstChild,n=t.nextSibling;return n.firstChild,f(n,d(Zt,{}),null),e})(),nn=b("<li></li>"),sn=b("<ul></ul>"),rn=b('<li class="list-disc ml-4"></li>'),Te=e=>(()=>{const t=nn.cloneNode(!0);return f(t,()=>e.message()?.message,null),f(t,(()=>{const n=M(()=>typeof e.message()?.list=="object");return()=>n()?(()=>{const s=sn.cloneNode(!0);return f(s,d(I,{get each(){return e.message()?.list},children:r=>(()=>{const i=rn.cloneNode(!0);return f(i,r),i})()})),s})():""})(),null),_(()=>ve(t,"mb-1 "+(e.message()?.isCorrect?"list-['✅']":"list-['🚫']"))),t})(),on=b('<span class="font-bold float-right">+ <!> point</span>'),ln=b('<div><ul class="mt-1 [&amp;>li]:ml-4 flex flex-col gap-1"></ul><button class="block underline">see </button></div>'),cn=b("<span>chord </span>"),un=e=>{const[t,n]=E(!1),s=M(()=>e.result.messages?.findIndex(({isCorrect:i})=>!i)),r=M(()=>s()===-1?{message:"Everything's correct!",points:0,isCorrect:!0}:e.result.messages?.[s()]);return(()=>{const i=ln.cloneNode(!0),o=i.firstChild,l=o.nextSibling;return l.firstChild,f(i,d(I,{get each(){return e.indicies},children:(u,a)=>(()=>{const c=cn.cloneNode(!0);return c.firstChild,f(c,u+1,null),f(c,()=>e.indicies.length-1===a()?"":" -> ",null),c})()}),o),f(i,d(K,{get when(){return e.indicies.length!==1||e.indicies[0]!==0},get children(){const u=on.cloneNode(!0),a=u.firstChild,c=a.nextSibling;return c.nextSibling,f(u,()=>e.result.points??0,c),f(u,()=>e.result.points===1?"":"s",null),u}}),o),f(o,d(K,{get when(){return t()},get fallback(){return d(Te,{message:r})},get children(){return d(I,{get each(){return e.result.messages},children:u=>d(Te,{message:()=>u})})}})),l.$$click=()=>n(!t()),f(l,()=>t()?"less":"more...",null),_(()=>ve(i,`${s()===-1?"bg-green-500":"bg-red-500"} bg-opacity-40
        border-black border-b-[1px] last:border-b-0
        py-2 px-2`)),i})()};Q(["click"]);const an=b('<div><div class="bg-white px-4 py-2 cursor-pointer"><button class="font-bold float-right">▲</button></div></div>'),fn=e=>{const[t,n]=E(!0),s=M(()=>oe()[0]),[r,i]=E();return ee(()=>{const o=e.voiceLead();i(o?.bass.map((l,u)=>e.graderFunction([l,o.tenor[u],o.alto[u],o.soprano[u]],s()[u],k(e.isKeyMajor)??!0)))}),ee(()=>{e.setTotalPoints(o=>o+(r()?.reduce((l,u,a)=>a===0?0:u.points+l,0)??0))}),(()=>{const o=an.cloneNode(!0),l=o.firstChild,u=l.firstChild;return l.$$click=()=>n(!t()),f(l,()=>e.children,u),f(o,d(K,{get when(){return t()},get children(){return d(I,{get each(){return r()},children:(a,c)=>d(un,{get indicies(){return[c()]},result:a})})}}),null),_(()=>u.style.setProperty("transform",`rotate(${t()?180:0}deg)`)),o})()};Q(["click"]);const ze=Pe();function dn(e){const t=E();return d(ze.Provider,{value:t,get children(){return e.children}})}function Ze(){return ke(ze)}const me=[0,2,4,5,7,9,11],Se=[0,2,3,5,7,8,10],hn={flat:-1,sharp:1,doubleFlat:-2,doubleSharp:2,natural:0},gn={majorTriad:[0,4,7],minorTriad:[0,3,7],diminishedTriad:[0,3,6],majorSeventh:[0,4,7,11],majorMinorSeventh:[0,4,7,10],minorSeventh:[0,3,7,10],halfDiminishedSeventh:[0,3,6,10],diminishedSeventh:[0,3,6,9]};function pn(e,t){const n=t.mode==="major",s=(Math.abs(t.fifths)*(t.fifths>0?4:3)+(n?0:5))%7,r=e.step>=s?e.step-s+1:8+e.step-s,i=(n?me:Se)[r-1],o=hn[e.accidental??"natural"],l=(e.pitch+(t.mode=="minor"?3:0)+t.fifths*5-o)%12+o;return{degree:r,accidental:l-i}}function bn(e,t){return((t?me:Se)[e.degree-1]+e.accidental)%12}function yn(e,t){const n=[[],[],[],[]];return e.staves.forEach((s,r)=>{s.measures.forEach(i=>{i.noteSets.forEach(o=>{(r==0?[1,0]:[3,2]).forEach((u,a)=>{n[u].push({note:o.notes[a],scaleDegree:pn(o.notes[a],t)})})})})}),{keySignature:t,soprano:n[0],alto:n[1],tenor:n[2],bass:n[3]}}function vn(e,t){const n=gn[e.quality+(e.isSeventh?"Seventh":"Triad")],s=t?me:Se;return n.map(r=>(s[e.numeral-1]+r)%12)}const $n=[1,3,5,7],J=["bass part","tenor part","alto part","soprano part"],mn=["1st","3rd","5th","7th"],ae=[{function:et,points:1,correctMessage:"The chord is spelled correctly",errorMessage:"The chord is misspelled in the:",array:J},{function:tt,points:1,correctMessage:"The chord is spelled correctly enharmonically",errorMessage:"The chord is enharmonically misspelled in the:",array:J},{function:nt,points:1,correctMessage:"The chord spelling is in the correct inversion",errorMessage:"The chord spelling is not in the correct inversion",array:null},{function:st,points:1,correctMessage:"The chord spelling has no ommitted notes",errorMessage:"The chord spelling has the following scale degrees ommitted:",array:mn},{function:it,points:.5,correctMessage:"The leading tone is not doubled",errorMessage:"The leading tone is doubled in the:",array:J},{function:ot,points:.5,correctMessage:"The chordal seventh is not doubled",errorMessage:"The chordal seventh is doubled in the:",array:J},{function:lt,points:.5,correctMessage:"The fifth in the 6 4 chord is doubled",errorMessage:"The fifth in the 6 4 chord is not doubled",array:null},{function:ct,points:.5,correctMessage:"All adjacent upper voices are within an octave apart",errorMessage:"These adjacent upper voices are more than an octave apart:",array:["tenor to alto","alto to soprano"]},{function:ut,points:.5,correctMessage:"There are no voice crossings",errorMessage:"There are voice crossings between these voice parts",array:["bass to alto","bass to soprano","tenor to alto","tenor to soprano"]}];function et(e,t){return e.reduce((n,s,r)=>(t.includes(s)||n.push(r),n),[])}function tt(e,t,n){return e.reduce((s,r,i)=>{const o=(r.degree+(7-t))%7+1;return($n.indexOf(o)===-1||!n&&o===7||o===1&&r.accidental!==0)&&s.push(i),s},[])}function nt(e,t,n){return e==t[n]}function st(e,t,n){return t.reduce((s,r,i)=>{const o=e.includes(r),l=r==t[2];return o||n&&l||s.push(i),s},[])}function rt(e,t){const n=e.map((s,r)=>s===t?r:-1).filter(s=>s>-1);return n.length>=2?n:[]}function it(e){return rt(e,11)}function ot(e,t){return rt(e,t)}function lt(e,t){return e.indexOf(t)!==e.lastIndexOf(t)}function ct(e,t,n){return[t-e>12?0:-1,n-t>12?1:-1].filter(s=>s!==-1)}function ut(e,t,n,s){return[e>n?0:-1,e>s?1:-1,t>n?2:-1,t>s?3:-1].filter(r=>r!==-1)}function Sn(e,t,n){const s=e.map(({scaleDegree:a})=>bn(a,n)),r=vn(t,n),i=e.map(({scaleDegree:a})=>a),o=e.map(({note:a})=>a.pitch);let l=1;return{messages:[et(s,r),tt(i,t.numeral,t.isSeventh),nt(s[0],r,t.inversion),st(s,r,t.inversion===0),it(s),t.isSeventh?ot(s,r[3]):[],t.inversion===2&&!t.isSeventh?lt(s,r[2]):!0,ct(o[1],o[2],o[3]),ut(o[0],o[1],o[2],o[3])].map((a,c)=>{const h=typeof a=="object"?a.length===0:a;h||(l-=ae[c].points);const p=ae[c][`${h?"correct":"error"}Message`],v=!h&&typeof a=="object"?a.map(m=>ae[c].array[m]):void 0;return{isCorrect:h,message:p,list:v}}),points:l<0?0:l}}const wn=b(`<button class="fixed top-8 right-4 px-4 py-2 text-white
                bg-green-600 shadow-md shadow-[rgba(0,0,0,.3)] hover:bg-green-400">Grade</button>`),xn=b(`<div class="fixed top-0 left-full w-96 text-center
                h-screen bg-gray-200 px-4 py-8 shadow-lg shadow-gray-400
                transition-transform duration-500
                flex flex-col gap-6
                overflow-scroll"><h2 class="text-2xl font-bold">Points: <!> / 18</h2><div class="sticky bottom-0 flex-1 
                    flex justify-center gap-4 items-end"><button class="text-white px-4 py-2 bg-red-600 shadow-md shadow-[rgba(0,0,0,.3)] hover:bg-red-400">Close</button><button class="text-white px-4 py-2 bg-green-600 shadow-md shadow-[rgba(0,0,0,.3)] hover:bg-green-400">Grade Again</button></div></div>`),_n=b('<div class="text-left"></div>'),Cn=()=>{const[e,t]=E(!1),n=Ze()[0],[s,r]=E(),[i,o]=E(),[l,u]=E(0),a=()=>{u(0),n()?.getScore().done(c=>{n()?.getKeySignature().done(h=>{r(yn(c,h)),o(h.mode==="major")})})};return[(()=>{const c=wn.cloneNode(!0);return c.$$click=()=>{a(),t(!0)},c})(),(()=>{const c=xn.cloneNode(!0),h=c.firstChild,p=h.firstChild,v=p.nextSibling;v.nextSibling;const m=h.nextSibling,j=m.firstChild,D=j.nextSibling;return f(h,l,v),f(c,d(I,{each:["Chord Spelling"],children:L=>(()=>{const w=_n.cloneNode(!0);return f(w,d(fn,{voiceLead:s,graderFunction:Sn,isKeyMajor:i,setTotalPoints:u,children:L})),w})()}),m),j.$$click=()=>t(!1),D.$$click=()=>a(),_(()=>c.style.setProperty("transform",`translateX(-${e()?"100":"0"}%)`)),c})()]};Q(["click"]);const An=b('<hgroup class="text-center my-8 flex flex-col items-center gap-4"><h1 class="text-4xl font-bold pb-4 border-b-2">Voice Leader</h1><p>Grader for AP Music Theory Question 6</p></hgroup>'),Nn=()=>[An.cloneNode(!0),d(It,{get setScoreView(){return Ze()[1]}}),d(tn,{}),d(Cn,{})],at=document.getElementById("root");console.log(at);Mt(()=>d(Gt,{get children(){return d(dn,{get children(){return d(Nn,{})}})}}),at);
